"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
self["webpackHotUpdate_N_E"]("app/dashboard/page",{

/***/ "(app-pages-browser)/./src/hooks/useAuth.ts":
/*!******************************!*\
  !*** ./src/hooks/useAuth.ts ***!
  \******************************/
/***/ (function(module, __webpack_exports__, __webpack_require__) {

eval(__webpack_require__.ts("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   useAuth: function() { return /* binding */ useAuth; }\n/* harmony export */ });\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! react */ \"(app-pages-browser)/./node_modules/next/dist/compiled/react/index.js\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _lib_supabase__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! @/lib/supabase */ \"(app-pages-browser)/./src/lib/supabase.ts\");\n/* harmony import */ var _lib_auth_config__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! @/lib/auth-config */ \"(app-pages-browser)/./src/lib/auth-config.ts\");\n\n\n\nfunction useAuth() {\n    const [state, setState] = (0,react__WEBPACK_IMPORTED_MODULE_0__.useState)({\n        user: null,\n        session: null,\n        loading: true,\n        error: null\n    });\n    // Initialize auth state\n    (0,react__WEBPACK_IMPORTED_MODULE_0__.useEffect)(()=>{\n        // Get initial session\n        const getInitialSession = async ()=>{\n            try {\n                var _session_user, _session_user1;\n                console.log(\"useAuth: Getting initial session...\");\n                const { data: { session }, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.auth.getSession();\n                console.log(\"useAuth: Initial session result:\", {\n                    hasSession: !!session,\n                    userId: session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.id,\n                    userEmail: session === null || session === void 0 ? void 0 : (_session_user1 = session.user) === null || _session_user1 === void 0 ? void 0 : _session_user1.email,\n                    error: error === null || error === void 0 ? void 0 : error.message,\n                    sessionExpiresAt: session === null || session === void 0 ? void 0 : session.expires_at,\n                    sessionAccessToken: (session === null || session === void 0 ? void 0 : session.access_token) ? \"PRESENT\" : \"MISSING\"\n                });\n                if (error) {\n                    console.error(\"useAuth: Error getting session:\", error);\n                    setState((prev)=>({\n                            ...prev,\n                            error,\n                            loading: false\n                        }));\n                    return;\n                }\n                if (session) {\n                    console.log(\"useAuth: Enriching user data...\");\n                    const user = await enrichUserData(session.user);\n                    console.log(\"useAuth: User enriched:\", {\n                        id: user.id,\n                        email: user.email,\n                        role: user.role,\n                        shop_id: user.shop_id\n                    });\n                    setState({\n                        user,\n                        session,\n                        loading: false,\n                        error: null\n                    });\n                } else {\n                    console.log(\"useAuth: No session found\");\n                    setState((prev)=>({\n                            ...prev,\n                            loading: false\n                        }));\n                }\n            } catch (error) {\n                console.error(\"useAuth: Exception getting initial session:\", error);\n                setState((prev)=>({\n                        ...prev,\n                        error: error,\n                        loading: false\n                    }));\n            }\n        };\n        getInitialSession();\n        // Listen for auth changes\n        const { data: { subscription } } = _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.auth.onAuthStateChange(async (event, session)=>{\n            var _session_user, _session_user1;\n            console.log(\"useAuth: Auth state changed:\", event, {\n                hasSession: !!session,\n                userId: session === null || session === void 0 ? void 0 : (_session_user = session.user) === null || _session_user === void 0 ? void 0 : _session_user.id,\n                userEmail: session === null || session === void 0 ? void 0 : (_session_user1 = session.user) === null || _session_user1 === void 0 ? void 0 : _session_user1.email,\n                sessionExpiresAt: session === null || session === void 0 ? void 0 : session.expires_at,\n                sessionAccessToken: (session === null || session === void 0 ? void 0 : session.access_token) ? \"PRESENT\" : \"MISSING\"\n            });\n            setState((prev)=>({\n                    ...prev,\n                    loading: true\n                }));\n            if (session) {\n                console.log(\"useAuth: Enriching user data for auth change...\");\n                const user = await enrichUserData(session.user);\n                console.log(\"useAuth: User enriched for auth change:\", {\n                    id: user.id,\n                    email: user.email,\n                    role: user.role,\n                    shop_id: user.shop_id\n                });\n                setState({\n                    user,\n                    session,\n                    loading: false,\n                    error: null\n                });\n            } else {\n                console.log(\"useAuth: Session cleared\");\n                setState({\n                    user: null,\n                    session: null,\n                    loading: false,\n                    error: null\n                });\n            }\n        });\n        return ()=>subscription.unsubscribe();\n    }, []);\n    // Enrich user data with role and permissions\n    const enrichUserData = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (user)=>{\n        try {\n            // Get user profile from database\n            const { data: profile, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"users\").select(\"role, shop_id, permissions\").eq(\"id\", user.id).single();\n            if (error) {\n                console.warn(\"Error fetching user profile:\", error);\n                // Return user without enriched data if profile doesn't exist\n                // This can happen during signup before the profile is created\n                return {\n                    ...user,\n                    role: \"attendant\",\n                    shop_id: undefined,\n                    permissions: []\n                };\n            }\n            return {\n                ...user,\n                role: (profile === null || profile === void 0 ? void 0 : profile.role) || \"attendant\",\n                shop_id: profile === null || profile === void 0 ? void 0 : profile.shop_id,\n                permissions: (profile === null || profile === void 0 ? void 0 : profile.permissions) || []\n            };\n        } catch (error) {\n            console.error(\"Error enriching user data:\", error);\n            // Return user without enriched data on error\n            return {\n                ...user,\n                role: \"attendant\",\n                shop_id: undefined,\n                permissions: []\n            };\n        }\n    }, []);\n    // Sign in with email and password\n    const signIn = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (email, password)=>{\n        try {\n            setState((prev)=>({\n                    ...prev,\n                    loading: true,\n                    error: null\n                }));\n            const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.auth.signInWithPassword({\n                email,\n                password\n            });\n            if (error) {\n                setState((prev)=>({\n                        ...prev,\n                        error,\n                        loading: false\n                    }));\n                return {\n                    user: null,\n                    error\n                };\n            }\n            if (data.user) {\n                const enrichedUser = await enrichUserData(data.user);\n                setState({\n                    user: enrichedUser,\n                    session: data.session,\n                    loading: false,\n                    error: null\n                });\n                return {\n                    user: enrichedUser,\n                    error: null\n                };\n            }\n            return {\n                user: null,\n                error: null\n            };\n        } catch (error) {\n            const authError = error;\n            setState((prev)=>({\n                    ...prev,\n                    error: authError,\n                    loading: false\n                }));\n            return {\n                user: null,\n                error: authError\n            };\n        }\n    }, [\n        enrichUserData\n    ]);\n    // Sign up with email and password\n    const signUp = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (email, password, userData)=>{\n        try {\n            setState((prev)=>({\n                    ...prev,\n                    loading: true,\n                    error: null\n                }));\n            // If shop_data is provided, save it to a temporary table for later use\n            if (userData.shop_data) {\n                const { error: tempShopError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"temp_shop_data\").insert({\n                    email: email,\n                    shop_data: userData.shop_data,\n                    created_at: new Date().toISOString()\n                });\n                if (tempShopError) {\n                    console.error(\"Error saving temporary shop data:\", tempShopError);\n                }\n            }\n            let data = null, error = null;\n            try {\n                const result = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.auth.signUp({\n                    email,\n                    password,\n                    options: {\n                        data: {\n                            name: userData.name,\n                            role: userData.role || _lib_auth_config__WEBPACK_IMPORTED_MODULE_2__.userRoles.ATTENDANT,\n                            shop_id: userData.shop_id\n                        },\n                        emailRedirectTo: \"\".concat(window.location.origin, \"/auth/confirm\")\n                    }\n                });\n                data = result.data;\n                error = result.error;\n            } catch (signUpError) {\n                console.error(\"Exception during supabase.auth.signUp:\", signUpError);\n                error = signUpError;\n                data = null;\n            }\n            if (error) {\n                setState((prev)=>({\n                        ...prev,\n                        error,\n                        loading: false\n                    }));\n                return {\n                    user: null,\n                    error\n                };\n            }\n            // If user needs email confirmation, don't create profile yet\n            if (data.user && !data.session) {\n                // User needs to confirm email\n                setState((prev)=>({\n                        ...prev,\n                        loading: false\n                    }));\n                return {\n                    user: null,\n                    error: null\n                };\n            }\n            if (data.user && data.session) {\n                // User was confirmed immediately (rare case)\n                const enrichedUser = await enrichUserData(data.user);\n                setState({\n                    user: enrichedUser,\n                    session: data.session,\n                    loading: false,\n                    error: null\n                });\n                return {\n                    user: enrichedUser,\n                    error: null\n                };\n            }\n            return {\n                user: null,\n                error: null\n            };\n        } catch (error) {\n            console.error(\"Error in signUp:\", error);\n            const authError = error;\n            setState((prev)=>({\n                    ...prev,\n                    error: authError,\n                    loading: false\n                }));\n            return {\n                user: null,\n                error: authError\n            };\n        }\n    }, [\n        enrichUserData\n    ]);\n    // Sign out\n    const signOut = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        try {\n            setState((prev)=>({\n                    ...prev,\n                    loading: true\n                }));\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.auth.signOut();\n            if (error) {\n                setState((prev)=>({\n                        ...prev,\n                        error,\n                        loading: false\n                    }));\n                return {\n                    error\n                };\n            }\n            setState({\n                user: null,\n                session: null,\n                loading: false,\n                error: null\n            });\n            return {\n                error: null\n            };\n        } catch (error) {\n            const authError = error;\n            setState((prev)=>({\n                    ...prev,\n                    error: authError,\n                    loading: false\n                }));\n            return {\n                error: authError\n            };\n        }\n    }, []);\n    // Reset password\n    const resetPassword = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (email)=>{\n        try {\n            setState((prev)=>({\n                    ...prev,\n                    loading: true,\n                    error: null\n                }));\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.auth.resetPasswordForEmail(email, {\n                redirectTo: \"\".concat(window.location.origin, \"/auth/reset-password\")\n            });\n            setState((prev)=>({\n                    ...prev,\n                    loading: false\n                }));\n            if (error) {\n                setState((prev)=>({\n                        ...prev,\n                        error\n                    }));\n                return {\n                    error\n                };\n            }\n            return {\n                error: null\n            };\n        } catch (error) {\n            const authError = error;\n            setState((prev)=>({\n                    ...prev,\n                    error: authError,\n                    loading: false\n                }));\n            return {\n                error: authError\n            };\n        }\n    }, []);\n    // Update password\n    const updatePassword = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (password)=>{\n        try {\n            setState((prev)=>({\n                    ...prev,\n                    loading: true,\n                    error: null\n                }));\n            const { error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.auth.updateUser({\n                password\n            });\n            setState((prev)=>({\n                    ...prev,\n                    loading: false\n                }));\n            if (error) {\n                setState((prev)=>({\n                        ...prev,\n                        error\n                    }));\n                return {\n                    error\n                };\n            }\n            return {\n                error: null\n            };\n        } catch (error) {\n            const authError = error;\n            setState((prev)=>({\n                    ...prev,\n                    error: authError,\n                    loading: false\n                }));\n            return {\n                error: authError\n            };\n        }\n    }, []);\n    // Update profile\n    const updateProfile = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async (updates)=>{\n        try {\n            setState((prev)=>({\n                    ...prev,\n                    loading: true,\n                    error: null\n                }));\n            // Update auth user data\n            const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.auth.updateUser({\n                data: updates\n            });\n            if (error) {\n                setState((prev)=>({\n                        ...prev,\n                        error,\n                        loading: false\n                    }));\n                return {\n                    user: null,\n                    error\n                };\n            }\n            if (data.user) {\n                // Update user profile in database\n                const { error: profileError } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.from(\"users\").update(updates).eq(\"id\", data.user.id);\n                if (profileError) {\n                    console.error(\"Error updating user profile:\", profileError);\n                }\n                const enrichedUser = await enrichUserData(data.user);\n                setState((prev)=>({\n                        ...prev,\n                        user: enrichedUser,\n                        loading: false\n                    }));\n                return {\n                    user: enrichedUser,\n                    error: null\n                };\n            }\n            return {\n                user: null,\n                error: null\n            };\n        } catch (error) {\n            const authError = error;\n            setState((prev)=>({\n                    ...prev,\n                    error: authError,\n                    loading: false\n                }));\n            return {\n                user: null,\n                error: authError\n            };\n        }\n    }, [\n        enrichUserData\n    ]);\n    // Refresh session\n    const refreshSession = (0,react__WEBPACK_IMPORTED_MODULE_0__.useCallback)(async ()=>{\n        try {\n            const { data, error } = await _lib_supabase__WEBPACK_IMPORTED_MODULE_1__.supabase.auth.refreshSession();\n            if (error) {\n                setState((prev)=>({\n                        ...prev,\n                        error\n                    }));\n                return;\n            }\n            if (data.session) {\n                const user = await enrichUserData(data.session.user);\n                setState((prev)=>({\n                        ...prev,\n                        user,\n                        session: data.session,\n                        error: null\n                    }));\n            }\n        } catch (error) {\n            const authError = error;\n            setState((prev)=>({\n                    ...prev,\n                    error: authError\n                }));\n        }\n    }, [\n        enrichUserData\n    ]);\n    return {\n        ...state,\n        signIn,\n        signUp,\n        signOut,\n        resetPassword,\n        updatePassword,\n        updateProfile,\n        refreshSession\n    };\n}\n\n\n;\n    // Wrapped in an IIFE to avoid polluting the global scope\n    ;\n    (function () {\n        var _a, _b;\n        // Legacy CSS implementations will `eval` browser code in a Node.js context\n        // to extract CSS. For backwards compatibility, we need to check we're in a\n        // browser context before continuing.\n        if (typeof self !== 'undefined' &&\n            // AMP / No-JS mode does not inject these helpers:\n            '$RefreshHelpers$' in self) {\n            // @ts-ignore __webpack_module__ is global\n            var currentExports = module.exports;\n            // @ts-ignore __webpack_module__ is global\n            var prevSignature = (_b = (_a = module.hot.data) === null || _a === void 0 ? void 0 : _a.prevSignature) !== null && _b !== void 0 ? _b : null;\n            // This cannot happen in MainTemplate because the exports mismatch between\n            // templating and execution.\n            self.$RefreshHelpers$.registerExportsForReactRefresh(currentExports, module.id);\n            // A module can be accepted automatically based on its exports, e.g. when\n            // it is a Refresh Boundary.\n            if (self.$RefreshHelpers$.isReactRefreshBoundary(currentExports)) {\n                // Save the previous exports signature on update so we can compare the boundary\n                // signatures. We avoid saving exports themselves since it causes memory leaks (https://github.com/vercel/next.js/pull/53797)\n                module.hot.dispose(function (data) {\n                    data.prevSignature =\n                        self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports);\n                });\n                // Unconditionally accept an update to this module, we'll check if it's\n                // still a Refresh Boundary later.\n                // @ts-ignore importMeta is replaced in the loader\n                module.hot.accept();\n                // This field is set when the previous version of this module was a\n                // Refresh Boundary, letting us know we need to check for invalidation or\n                // enqueue an update.\n                if (prevSignature !== null) {\n                    // A boundary can become ineligible if its exports are incompatible\n                    // with the previous exports.\n                    //\n                    // For example, if you add/remove/change exports, we'll want to\n                    // re-execute the importing modules, and force those components to\n                    // re-render. Similarly, if you convert a class component to a\n                    // function, we want to invalidate the boundary.\n                    if (self.$RefreshHelpers$.shouldInvalidateReactRefreshBoundary(prevSignature, self.$RefreshHelpers$.getRefreshBoundarySignature(currentExports))) {\n                        module.hot.invalidate();\n                    }\n                    else {\n                        self.$RefreshHelpers$.scheduleUpdate();\n                    }\n                }\n            }\n            else {\n                // Since we just executed the code for the module, it's possible that the\n                // new exports made it ineligible for being a boundary.\n                // We only care about the case when we were _previously_ a boundary,\n                // because we already accepted this update (accidental side effect).\n                var isNoLongerABoundary = prevSignature !== null;\n                if (isNoLongerABoundary) {\n                    module.hot.invalidate();\n                }\n            }\n        }\n    })();\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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SUFDRjtBQUNGIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vX05fRS8uL3NyYy9ob29rcy91c2VBdXRoLnRzPzNjMWMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgdXNlU3RhdGUsIHVzZUVmZmVjdCwgdXNlQ2FsbGJhY2sgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgeyBVc2VyLCBTZXNzaW9uLCBBdXRoRXJyb3IgfSBmcm9tICdAc3VwYWJhc2Uvc3VwYWJhc2UtanMnO1xuaW1wb3J0IHsgc3VwYWJhc2UgfSBmcm9tICdAL2xpYi9zdXBhYmFzZSc7XG5pbXBvcnQgeyB1c2VyUm9sZXMsIHR5cGUgVXNlclJvbGUgfSBmcm9tICdAL2xpYi9hdXRoLWNvbmZpZyc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgQXV0aFVzZXIgZXh0ZW5kcyBVc2VyIHtcbiAgcm9sZT86IFVzZXJSb2xlO1xuICBzaG9wX2lkPzogc3RyaW5nO1xuICBwZXJtaXNzaW9ucz86IHN0cmluZ1tdO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhTdGF0ZSB7XG4gIHVzZXI6IEF1dGhVc2VyIHwgbnVsbDtcbiAgc2Vzc2lvbjogU2Vzc2lvbiB8IG51bGw7XG4gIGxvYWRpbmc6IGJvb2xlYW47XG4gIGVycm9yOiBBdXRoRXJyb3IgfCBudWxsO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIEF1dGhBY3Rpb25zIHtcbiAgc2lnbkluOiAoXG4gICAgZW1haWw6IHN0cmluZyxcbiAgICBwYXNzd29yZDogc3RyaW5nXG4gICkgPT4gUHJvbWlzZTx7IHVzZXI6IEF1dGhVc2VyIHwgbnVsbDsgZXJyb3I6IEF1dGhFcnJvciB8IG51bGwgfT47XG4gIHNpZ25VcDogKFxuICAgIGVtYWlsOiBzdHJpbmcsXG4gICAgcGFzc3dvcmQ6IHN0cmluZyxcbiAgICB1c2VyRGF0YToge1xuICAgICAgbmFtZTogc3RyaW5nO1xuICAgICAgcm9sZT86IFVzZXJSb2xlO1xuICAgICAgc2hvcF9pZD86IHN0cmluZztcbiAgICAgIHNob3BfZGF0YT86IGFueTtcbiAgICB9XG4gICkgPT4gUHJvbWlzZTx7IHVzZXI6IEF1dGhVc2VyIHwgbnVsbDsgZXJyb3I6IEF1dGhFcnJvciB8IG51bGwgfT47XG4gIHNpZ25PdXQ6ICgpID0+IFByb21pc2U8eyBlcnJvcjogQXV0aEVycm9yIHwgbnVsbCB9PjtcbiAgcmVzZXRQYXNzd29yZDogKGVtYWlsOiBzdHJpbmcpID0+IFByb21pc2U8eyBlcnJvcjogQXV0aEVycm9yIHwgbnVsbCB9PjtcbiAgdXBkYXRlUGFzc3dvcmQ6IChwYXNzd29yZDogc3RyaW5nKSA9PiBQcm9taXNlPHsgZXJyb3I6IEF1dGhFcnJvciB8IG51bGwgfT47XG4gIHVwZGF0ZVByb2ZpbGU6IChcbiAgICB1cGRhdGVzOiBQYXJ0aWFsPEF1dGhVc2VyPlxuICApID0+IFByb21pc2U8eyB1c2VyOiBBdXRoVXNlciB8IG51bGw7IGVycm9yOiBBdXRoRXJyb3IgfCBudWxsIH0+O1xuICByZWZyZXNoU2Vzc2lvbjogKCkgPT4gUHJvbWlzZTx2b2lkPjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVzZUF1dGgoKTogQXV0aFN0YXRlICYgQXV0aEFjdGlvbnMge1xuICBjb25zdCBbc3RhdGUsIHNldFN0YXRlXSA9IHVzZVN0YXRlPEF1dGhTdGF0ZT4oe1xuICAgIHVzZXI6IG51bGwsXG4gICAgc2Vzc2lvbjogbnVsbCxcbiAgICBsb2FkaW5nOiB0cnVlLCAvLyBTdGFydCB3aXRoIGxvYWRpbmcgdHJ1ZVxuICAgIGVycm9yOiBudWxsLFxuICB9KTtcblxuICAvLyBJbml0aWFsaXplIGF1dGggc3RhdGVcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICAvLyBHZXQgaW5pdGlhbCBzZXNzaW9uXG4gICAgY29uc3QgZ2V0SW5pdGlhbFNlc3Npb24gPSBhc3luYyAoKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBjb25zb2xlLmxvZygndXNlQXV0aDogR2V0dGluZyBpbml0aWFsIHNlc3Npb24uLi4nKTtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGRhdGE6IHsgc2Vzc2lvbiB9LFxuICAgICAgICAgIGVycm9yLFxuICAgICAgICB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRTZXNzaW9uKCk7XG5cbiAgICAgICAgY29uc29sZS5sb2coJ3VzZUF1dGg6IEluaXRpYWwgc2Vzc2lvbiByZXN1bHQ6Jywge1xuICAgICAgICAgIGhhc1Nlc3Npb246ICEhc2Vzc2lvbixcbiAgICAgICAgICB1c2VySWQ6IHNlc3Npb24/LnVzZXI/LmlkLFxuICAgICAgICAgIHVzZXJFbWFpbDogc2Vzc2lvbj8udXNlcj8uZW1haWwsXG4gICAgICAgICAgZXJyb3I6IGVycm9yPy5tZXNzYWdlLFxuICAgICAgICAgIHNlc3Npb25FeHBpcmVzQXQ6IHNlc3Npb24/LmV4cGlyZXNfYXQsXG4gICAgICAgICAgc2Vzc2lvbkFjY2Vzc1Rva2VuOiBzZXNzaW9uPy5hY2Nlc3NfdG9rZW4gPyAnUFJFU0VOVCcgOiAnTUlTU0lORycsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ3VzZUF1dGg6IEVycm9yIGdldHRpbmcgc2Vzc2lvbjonLCBlcnJvcik7XG4gICAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBlcnJvciwgbG9hZGluZzogZmFsc2UgfSkpO1xuICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChzZXNzaW9uKSB7XG4gICAgICAgICAgY29uc29sZS5sb2coJ3VzZUF1dGg6IEVucmljaGluZyB1c2VyIGRhdGEuLi4nKTtcbiAgICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgZW5yaWNoVXNlckRhdGEoc2Vzc2lvbi51c2VyKTtcbiAgICAgICAgICBjb25zb2xlLmxvZygndXNlQXV0aDogVXNlciBlbnJpY2hlZDonLCB7XG4gICAgICAgICAgICBpZDogdXNlci5pZCxcbiAgICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgICAgcm9sZTogdXNlci5yb2xlLFxuICAgICAgICAgICAgc2hvcF9pZDogdXNlci5zaG9wX2lkLFxuICAgICAgICAgIH0pO1xuICAgICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgIHVzZXIsXG4gICAgICAgICAgICBzZXNzaW9uLFxuICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zb2xlLmxvZygndXNlQXV0aDogTm8gc2Vzc2lvbiBmb3VuZCcpO1xuICAgICAgICAgIHNldFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgbG9hZGluZzogZmFsc2UgfSkpO1xuICAgICAgICB9XG4gICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLmVycm9yKCd1c2VBdXRoOiBFeGNlcHRpb24gZ2V0dGluZyBpbml0aWFsIHNlc3Npb246JywgZXJyb3IpO1xuICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICBlcnJvcjogZXJyb3IgYXMgQXV0aEVycm9yLFxuICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICB9KSk7XG4gICAgICB9XG4gICAgfTtcblxuICAgIGdldEluaXRpYWxTZXNzaW9uKCk7XG5cbiAgICAvLyBMaXN0ZW4gZm9yIGF1dGggY2hhbmdlc1xuICAgIGNvbnN0IHtcbiAgICAgIGRhdGE6IHsgc3Vic2NyaXB0aW9uIH0sXG4gICAgfSA9IHN1cGFiYXNlLmF1dGgub25BdXRoU3RhdGVDaGFuZ2UoYXN5bmMgKGV2ZW50LCBzZXNzaW9uKSA9PiB7XG4gICAgICBjb25zb2xlLmxvZygndXNlQXV0aDogQXV0aCBzdGF0ZSBjaGFuZ2VkOicsIGV2ZW50LCB7XG4gICAgICAgIGhhc1Nlc3Npb246ICEhc2Vzc2lvbixcbiAgICAgICAgdXNlcklkOiBzZXNzaW9uPy51c2VyPy5pZCxcbiAgICAgICAgdXNlckVtYWlsOiBzZXNzaW9uPy51c2VyPy5lbWFpbCxcbiAgICAgICAgc2Vzc2lvbkV4cGlyZXNBdDogc2Vzc2lvbj8uZXhwaXJlc19hdCxcbiAgICAgICAgc2Vzc2lvbkFjY2Vzc1Rva2VuOiBzZXNzaW9uPy5hY2Nlc3NfdG9rZW4gPyAnUFJFU0VOVCcgOiAnTUlTU0lORycsXG4gICAgICB9KTtcblxuICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBsb2FkaW5nOiB0cnVlIH0pKTtcblxuICAgICAgaWYgKHNlc3Npb24pIHtcbiAgICAgICAgY29uc29sZS5sb2coJ3VzZUF1dGg6IEVucmljaGluZyB1c2VyIGRhdGEgZm9yIGF1dGggY2hhbmdlLi4uJyk7XG4gICAgICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBlbnJpY2hVc2VyRGF0YShzZXNzaW9uLnVzZXIpO1xuICAgICAgICBjb25zb2xlLmxvZygndXNlQXV0aDogVXNlciBlbnJpY2hlZCBmb3IgYXV0aCBjaGFuZ2U6Jywge1xuICAgICAgICAgIGlkOiB1c2VyLmlkLFxuICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLFxuICAgICAgICAgIHJvbGU6IHVzZXIucm9sZSxcbiAgICAgICAgICBzaG9wX2lkOiB1c2VyLnNob3BfaWQsXG4gICAgICAgIH0pO1xuICAgICAgICBzZXRTdGF0ZSh7XG4gICAgICAgICAgdXNlcixcbiAgICAgICAgICBzZXNzaW9uLFxuICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgIGVycm9yOiBudWxsLFxuICAgICAgICB9KTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIGNvbnNvbGUubG9nKCd1c2VBdXRoOiBTZXNzaW9uIGNsZWFyZWQnKTtcbiAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgIHVzZXI6IG51bGwsXG4gICAgICAgICAgc2Vzc2lvbjogbnVsbCxcbiAgICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgfSk7XG4gICAgICB9XG4gICAgfSk7XG5cbiAgICByZXR1cm4gKCkgPT4gc3Vic2NyaXB0aW9uLnVuc3Vic2NyaWJlKCk7XG4gIH0sIFtdKTtcblxuICAvLyBFbnJpY2ggdXNlciBkYXRhIHdpdGggcm9sZSBhbmQgcGVybWlzc2lvbnNcbiAgY29uc3QgZW5yaWNoVXNlckRhdGEgPSB1c2VDYWxsYmFjayhhc3luYyAodXNlcjogVXNlcik6IFByb21pc2U8QXV0aFVzZXI+ID0+IHtcbiAgICB0cnkge1xuICAgICAgLy8gR2V0IHVzZXIgcHJvZmlsZSBmcm9tIGRhdGFiYXNlXG4gICAgICBjb25zdCB7IGRhdGE6IHByb2ZpbGUsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZVxuICAgICAgICAuZnJvbSgndXNlcnMnKVxuICAgICAgICAuc2VsZWN0KCdyb2xlLCBzaG9wX2lkLCBwZXJtaXNzaW9ucycpXG4gICAgICAgIC5lcSgnaWQnLCB1c2VyLmlkKVxuICAgICAgICAuc2luZ2xlKCk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBjb25zb2xlLndhcm4oJ0Vycm9yIGZldGNoaW5nIHVzZXIgcHJvZmlsZTonLCBlcnJvcik7XG4gICAgICAgIC8vIFJldHVybiB1c2VyIHdpdGhvdXQgZW5yaWNoZWQgZGF0YSBpZiBwcm9maWxlIGRvZXNuJ3QgZXhpc3RcbiAgICAgICAgLy8gVGhpcyBjYW4gaGFwcGVuIGR1cmluZyBzaWdudXAgYmVmb3JlIHRoZSBwcm9maWxlIGlzIGNyZWF0ZWRcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAuLi51c2VyLFxuICAgICAgICAgIHJvbGU6ICdhdHRlbmRhbnQnIGFzIFVzZXJSb2xlLCAvLyBEZWZhdWx0IHJvbGVcbiAgICAgICAgICBzaG9wX2lkOiB1bmRlZmluZWQsXG4gICAgICAgICAgcGVybWlzc2lvbnM6IFtdLFxuICAgICAgICB9IGFzIEF1dGhVc2VyO1xuICAgICAgfVxuXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi51c2VyLFxuICAgICAgICByb2xlOiAocHJvZmlsZT8ucm9sZSBhcyBVc2VyUm9sZSkgfHwgJ2F0dGVuZGFudCcsXG4gICAgICAgIHNob3BfaWQ6IHByb2ZpbGU/LnNob3BfaWQsXG4gICAgICAgIHBlcm1pc3Npb25zOiBwcm9maWxlPy5wZXJtaXNzaW9ucyB8fCBbXSxcbiAgICAgIH07XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGVucmljaGluZyB1c2VyIGRhdGE6JywgZXJyb3IpO1xuICAgICAgLy8gUmV0dXJuIHVzZXIgd2l0aG91dCBlbnJpY2hlZCBkYXRhIG9uIGVycm9yXG4gICAgICByZXR1cm4ge1xuICAgICAgICAuLi51c2VyLFxuICAgICAgICByb2xlOiAnYXR0ZW5kYW50JyBhcyBVc2VyUm9sZSwgLy8gRGVmYXVsdCByb2xlXG4gICAgICAgIHNob3BfaWQ6IHVuZGVmaW5lZCxcbiAgICAgICAgcGVybWlzc2lvbnM6IFtdLFxuICAgICAgfSBhcyBBdXRoVXNlcjtcbiAgICB9XG4gIH0sIFtdKTtcblxuICAvLyBTaWduIGluIHdpdGggZW1haWwgYW5kIHBhc3N3b3JkXG4gIGNvbnN0IHNpZ25JbiA9IHVzZUNhbGxiYWNrKFxuICAgIGFzeW5jIChlbWFpbDogc3RyaW5nLCBwYXNzd29yZDogc3RyaW5nKSA9PiB7XG4gICAgICB0cnkge1xuICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGxvYWRpbmc6IHRydWUsIGVycm9yOiBudWxsIH0pKTtcblxuICAgICAgICBjb25zdCB7IGRhdGEsIGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnNpZ25JbldpdGhQYXNzd29yZCh7XG4gICAgICAgICAgZW1haWwsXG4gICAgICAgICAgcGFzc3dvcmQsXG4gICAgICAgIH0pO1xuXG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIHNldFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgZXJyb3IsIGxvYWRpbmc6IGZhbHNlIH0pKTtcbiAgICAgICAgICByZXR1cm4geyB1c2VyOiBudWxsLCBlcnJvciB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGEudXNlcikge1xuICAgICAgICAgIGNvbnN0IGVucmljaGVkVXNlciA9IGF3YWl0IGVucmljaFVzZXJEYXRhKGRhdGEudXNlcik7XG4gICAgICAgICAgc2V0U3RhdGUoe1xuICAgICAgICAgICAgdXNlcjogZW5yaWNoZWRVc2VyLFxuICAgICAgICAgICAgc2Vzc2lvbjogZGF0YS5zZXNzaW9uLFxuICAgICAgICAgICAgbG9hZGluZzogZmFsc2UsXG4gICAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgICB9KTtcbiAgICAgICAgICByZXR1cm4geyB1c2VyOiBlbnJpY2hlZFVzZXIsIGVycm9yOiBudWxsIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyB1c2VyOiBudWxsLCBlcnJvcjogbnVsbCB9O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgYXV0aEVycm9yID0gZXJyb3IgYXMgQXV0aEVycm9yO1xuICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGVycm9yOiBhdXRoRXJyb3IsIGxvYWRpbmc6IGZhbHNlIH0pKTtcbiAgICAgICAgcmV0dXJuIHsgdXNlcjogbnVsbCwgZXJyb3I6IGF1dGhFcnJvciB9O1xuICAgICAgfVxuICAgIH0sXG4gICAgW2VucmljaFVzZXJEYXRhXVxuICApO1xuXG4gIC8vIFNpZ24gdXAgd2l0aCBlbWFpbCBhbmQgcGFzc3dvcmRcbiAgY29uc3Qgc2lnblVwID0gdXNlQ2FsbGJhY2soXG4gICAgYXN5bmMgKFxuICAgICAgZW1haWw6IHN0cmluZyxcbiAgICAgIHBhc3N3b3JkOiBzdHJpbmcsXG4gICAgICB1c2VyRGF0YToge1xuICAgICAgICBuYW1lOiBzdHJpbmc7XG4gICAgICAgIHJvbGU/OiBVc2VyUm9sZTtcbiAgICAgICAgc2hvcF9pZD86IHN0cmluZztcbiAgICAgICAgc2hvcF9kYXRhPzogYW55O1xuICAgICAgfVxuICAgICkgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBsb2FkaW5nOiB0cnVlLCBlcnJvcjogbnVsbCB9KSk7XG5cbiAgICAgICAgLy8gSWYgc2hvcF9kYXRhIGlzIHByb3ZpZGVkLCBzYXZlIGl0IHRvIGEgdGVtcG9yYXJ5IHRhYmxlIGZvciBsYXRlciB1c2VcbiAgICAgICAgaWYgKHVzZXJEYXRhLnNob3BfZGF0YSkge1xuICAgICAgICAgIGNvbnN0IHsgZXJyb3I6IHRlbXBTaG9wRXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlXG4gICAgICAgICAgICAuZnJvbSgndGVtcF9zaG9wX2RhdGEnKVxuICAgICAgICAgICAgLmluc2VydCh7XG4gICAgICAgICAgICAgIGVtYWlsOiBlbWFpbCxcbiAgICAgICAgICAgICAgc2hvcF9kYXRhOiB1c2VyRGF0YS5zaG9wX2RhdGEsXG4gICAgICAgICAgICAgIGNyZWF0ZWRfYXQ6IG5ldyBEYXRlKCkudG9JU09TdHJpbmcoKSxcbiAgICAgICAgICAgIH0pO1xuXG4gICAgICAgICAgaWYgKHRlbXBTaG9wRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHNhdmluZyB0ZW1wb3Jhcnkgc2hvcCBkYXRhOicsIHRlbXBTaG9wRXJyb3IpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBkYXRhOiBhbnkgPSBudWxsLFxuICAgICAgICAgIGVycm9yOiBBdXRoRXJyb3IgfCBudWxsID0gbnVsbDtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnNpZ25VcCh7XG4gICAgICAgICAgICBlbWFpbCxcbiAgICAgICAgICAgIHBhc3N3b3JkLFxuICAgICAgICAgICAgb3B0aW9uczoge1xuICAgICAgICAgICAgICBkYXRhOiB7XG4gICAgICAgICAgICAgICAgbmFtZTogdXNlckRhdGEubmFtZSxcbiAgICAgICAgICAgICAgICByb2xlOiB1c2VyRGF0YS5yb2xlIHx8IHVzZXJSb2xlcy5BVFRFTkRBTlQsXG4gICAgICAgICAgICAgICAgc2hvcF9pZDogdXNlckRhdGEuc2hvcF9pZCxcbiAgICAgICAgICAgICAgfSxcbiAgICAgICAgICAgICAgZW1haWxSZWRpcmVjdFRvOiBgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufS9hdXRoL2NvbmZpcm1gLFxuICAgICAgICAgICAgfSxcbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIGRhdGEgPSByZXN1bHQuZGF0YTtcbiAgICAgICAgICBlcnJvciA9IHJlc3VsdC5lcnJvcjtcbiAgICAgICAgfSBjYXRjaCAoc2lnblVwRXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdFeGNlcHRpb24gZHVyaW5nIHN1cGFiYXNlLmF1dGguc2lnblVwOicsIHNpZ25VcEVycm9yKTtcbiAgICAgICAgICBlcnJvciA9IHNpZ25VcEVycm9yIGFzIEF1dGhFcnJvcjtcbiAgICAgICAgICBkYXRhID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChlcnJvcikge1xuICAgICAgICAgIHNldFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgZXJyb3IsIGxvYWRpbmc6IGZhbHNlIH0pKTtcbiAgICAgICAgICByZXR1cm4geyB1c2VyOiBudWxsLCBlcnJvciB9O1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gSWYgdXNlciBuZWVkcyBlbWFpbCBjb25maXJtYXRpb24sIGRvbid0IGNyZWF0ZSBwcm9maWxlIHlldFxuICAgICAgICBpZiAoZGF0YS51c2VyICYmICFkYXRhLnNlc3Npb24pIHtcbiAgICAgICAgICAvLyBVc2VyIG5lZWRzIHRvIGNvbmZpcm0gZW1haWxcbiAgICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGxvYWRpbmc6IGZhbHNlIH0pKTtcbiAgICAgICAgICByZXR1cm4geyB1c2VyOiBudWxsLCBlcnJvcjogbnVsbCB9O1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKGRhdGEudXNlciAmJiBkYXRhLnNlc3Npb24pIHtcbiAgICAgICAgICAvLyBVc2VyIHdhcyBjb25maXJtZWQgaW1tZWRpYXRlbHkgKHJhcmUgY2FzZSlcbiAgICAgICAgICBjb25zdCBlbnJpY2hlZFVzZXIgPSBhd2FpdCBlbnJpY2hVc2VyRGF0YShkYXRhLnVzZXIpO1xuICAgICAgICAgIHNldFN0YXRlKHtcbiAgICAgICAgICAgIHVzZXI6IGVucmljaGVkVXNlcixcbiAgICAgICAgICAgIHNlc3Npb246IGRhdGEuc2Vzc2lvbixcbiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICAgICAgfSk7XG4gICAgICAgICAgcmV0dXJuIHsgdXNlcjogZW5yaWNoZWRVc2VyLCBlcnJvcjogbnVsbCB9O1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHsgdXNlcjogbnVsbCwgZXJyb3I6IG51bGwgfTtcbiAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIGluIHNpZ25VcDonLCBlcnJvcik7XG4gICAgICAgIGNvbnN0IGF1dGhFcnJvciA9IGVycm9yIGFzIEF1dGhFcnJvcjtcbiAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBlcnJvcjogYXV0aEVycm9yLCBsb2FkaW5nOiBmYWxzZSB9KSk7XG4gICAgICAgIHJldHVybiB7IHVzZXI6IG51bGwsIGVycm9yOiBhdXRoRXJyb3IgfTtcbiAgICAgIH1cbiAgICB9LFxuICAgIFtlbnJpY2hVc2VyRGF0YV1cbiAgKTtcblxuICAvLyBTaWduIG91dFxuICBjb25zdCBzaWduT3V0ID0gdXNlQ2FsbGJhY2soYXN5bmMgKCkgPT4ge1xuICAgIHRyeSB7XG4gICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGxvYWRpbmc6IHRydWUgfSkpO1xuXG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnNpZ25PdXQoKTtcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHNldFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgZXJyb3IsIGxvYWRpbmc6IGZhbHNlIH0pKTtcbiAgICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICAgIH1cblxuICAgICAgc2V0U3RhdGUoe1xuICAgICAgICB1c2VyOiBudWxsLFxuICAgICAgICBzZXNzaW9uOiBudWxsLFxuICAgICAgICBsb2FkaW5nOiBmYWxzZSxcbiAgICAgICAgZXJyb3I6IG51bGwsXG4gICAgICB9KTtcblxuICAgICAgcmV0dXJuIHsgZXJyb3I6IG51bGwgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgYXV0aEVycm9yID0gZXJyb3IgYXMgQXV0aEVycm9yO1xuICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBlcnJvcjogYXV0aEVycm9yLCBsb2FkaW5nOiBmYWxzZSB9KSk7XG4gICAgICByZXR1cm4geyBlcnJvcjogYXV0aEVycm9yIH07XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8gUmVzZXQgcGFzc3dvcmRcbiAgY29uc3QgcmVzZXRQYXNzd29yZCA9IHVzZUNhbGxiYWNrKGFzeW5jIChlbWFpbDogc3RyaW5nKSA9PiB7XG4gICAgdHJ5IHtcbiAgICAgIHNldFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgbG9hZGluZzogdHJ1ZSwgZXJyb3I6IG51bGwgfSkpO1xuXG4gICAgICBjb25zdCB7IGVycm9yIH0gPSBhd2FpdCBzdXBhYmFzZS5hdXRoLnJlc2V0UGFzc3dvcmRGb3JFbWFpbChlbWFpbCwge1xuICAgICAgICByZWRpcmVjdFRvOiBgJHt3aW5kb3cubG9jYXRpb24ub3JpZ2lufS9hdXRoL3Jlc2V0LXBhc3N3b3JkYCxcbiAgICAgIH0pO1xuXG4gICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGxvYWRpbmc6IGZhbHNlIH0pKTtcblxuICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgIHNldFN0YXRlKHByZXYgPT4gKHsgLi4ucHJldiwgZXJyb3IgfSkpO1xuICAgICAgICByZXR1cm4geyBlcnJvciB9O1xuICAgICAgfVxuXG4gICAgICByZXR1cm4geyBlcnJvcjogbnVsbCB9O1xuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBhdXRoRXJyb3IgPSBlcnJvciBhcyBBdXRoRXJyb3I7XG4gICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGVycm9yOiBhdXRoRXJyb3IsIGxvYWRpbmc6IGZhbHNlIH0pKTtcbiAgICAgIHJldHVybiB7IGVycm9yOiBhdXRoRXJyb3IgfTtcbiAgICB9XG4gIH0sIFtdKTtcblxuICAvLyBVcGRhdGUgcGFzc3dvcmRcbiAgY29uc3QgdXBkYXRlUGFzc3dvcmQgPSB1c2VDYWxsYmFjayhhc3luYyAocGFzc3dvcmQ6IHN0cmluZykgPT4ge1xuICAgIHRyeSB7XG4gICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGxvYWRpbmc6IHRydWUsIGVycm9yOiBudWxsIH0pKTtcblxuICAgICAgY29uc3QgeyBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC51cGRhdGVVc2VyKHtcbiAgICAgICAgcGFzc3dvcmQsXG4gICAgICB9KTtcblxuICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBsb2FkaW5nOiBmYWxzZSB9KSk7XG5cbiAgICAgIGlmIChlcnJvcikge1xuICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGVycm9yIH0pKTtcbiAgICAgICAgcmV0dXJuIHsgZXJyb3IgfTtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIHsgZXJyb3I6IG51bGwgfTtcbiAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgY29uc3QgYXV0aEVycm9yID0gZXJyb3IgYXMgQXV0aEVycm9yO1xuICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBlcnJvcjogYXV0aEVycm9yLCBsb2FkaW5nOiBmYWxzZSB9KSk7XG4gICAgICByZXR1cm4geyBlcnJvcjogYXV0aEVycm9yIH07XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgLy8gVXBkYXRlIHByb2ZpbGVcbiAgY29uc3QgdXBkYXRlUHJvZmlsZSA9IHVzZUNhbGxiYWNrKFxuICAgIGFzeW5jICh1cGRhdGVzOiBQYXJ0aWFsPEF1dGhVc2VyPikgPT4ge1xuICAgICAgdHJ5IHtcbiAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBsb2FkaW5nOiB0cnVlLCBlcnJvcjogbnVsbCB9KSk7XG5cbiAgICAgICAgLy8gVXBkYXRlIGF1dGggdXNlciBkYXRhXG4gICAgICAgIGNvbnN0IHsgZGF0YSwgZXJyb3IgfSA9IGF3YWl0IHN1cGFiYXNlLmF1dGgudXBkYXRlVXNlcih7XG4gICAgICAgICAgZGF0YTogdXBkYXRlcyxcbiAgICAgICAgfSk7XG5cbiAgICAgICAgaWYgKGVycm9yKSB7XG4gICAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBlcnJvciwgbG9hZGluZzogZmFsc2UgfSkpO1xuICAgICAgICAgIHJldHVybiB7IHVzZXI6IG51bGwsIGVycm9yIH07XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoZGF0YS51c2VyKSB7XG4gICAgICAgICAgLy8gVXBkYXRlIHVzZXIgcHJvZmlsZSBpbiBkYXRhYmFzZVxuICAgICAgICAgIGNvbnN0IHsgZXJyb3I6IHByb2ZpbGVFcnJvciB9ID0gYXdhaXQgc3VwYWJhc2VcbiAgICAgICAgICAgIC5mcm9tKCd1c2VycycpXG4gICAgICAgICAgICAudXBkYXRlKHVwZGF0ZXMpXG4gICAgICAgICAgICAuZXEoJ2lkJywgZGF0YS51c2VyLmlkKTtcblxuICAgICAgICAgIGlmIChwcm9maWxlRXJyb3IpIHtcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0Vycm9yIHVwZGF0aW5nIHVzZXIgcHJvZmlsZTonLCBwcm9maWxlRXJyb3IpO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIGNvbnN0IGVucmljaGVkVXNlciA9IGF3YWl0IGVucmljaFVzZXJEYXRhKGRhdGEudXNlcik7XG4gICAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoe1xuICAgICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICAgIHVzZXI6IGVucmljaGVkVXNlcixcbiAgICAgICAgICAgIGxvYWRpbmc6IGZhbHNlLFxuICAgICAgICAgIH0pKTtcbiAgICAgICAgICByZXR1cm4geyB1c2VyOiBlbnJpY2hlZFVzZXIsIGVycm9yOiBudWxsIH07XG4gICAgICAgIH1cblxuICAgICAgICByZXR1cm4geyB1c2VyOiBudWxsLCBlcnJvcjogbnVsbCB9O1xuICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgY29uc3QgYXV0aEVycm9yID0gZXJyb3IgYXMgQXV0aEVycm9yO1xuICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGVycm9yOiBhdXRoRXJyb3IsIGxvYWRpbmc6IGZhbHNlIH0pKTtcbiAgICAgICAgcmV0dXJuIHsgdXNlcjogbnVsbCwgZXJyb3I6IGF1dGhFcnJvciB9O1xuICAgICAgfVxuICAgIH0sXG4gICAgW2VucmljaFVzZXJEYXRhXVxuICApO1xuXG4gIC8vIFJlZnJlc2ggc2Vzc2lvblxuICBjb25zdCByZWZyZXNoU2Vzc2lvbiA9IHVzZUNhbGxiYWNrKGFzeW5jICgpID0+IHtcbiAgICB0cnkge1xuICAgICAgY29uc3QgeyBkYXRhLCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5yZWZyZXNoU2Vzc2lvbigpO1xuXG4gICAgICBpZiAoZXJyb3IpIHtcbiAgICAgICAgc2V0U3RhdGUocHJldiA9PiAoeyAuLi5wcmV2LCBlcnJvciB9KSk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKGRhdGEuc2Vzc2lvbikge1xuICAgICAgICBjb25zdCB1c2VyID0gYXdhaXQgZW5yaWNoVXNlckRhdGEoZGF0YS5zZXNzaW9uLnVzZXIpO1xuICAgICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7XG4gICAgICAgICAgLi4ucHJldixcbiAgICAgICAgICB1c2VyLFxuICAgICAgICAgIHNlc3Npb246IGRhdGEuc2Vzc2lvbixcbiAgICAgICAgICBlcnJvcjogbnVsbCxcbiAgICAgICAgfSkpO1xuICAgICAgfVxuICAgIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgICBjb25zdCBhdXRoRXJyb3IgPSBlcnJvciBhcyBBdXRoRXJyb3I7XG4gICAgICBzZXRTdGF0ZShwcmV2ID0+ICh7IC4uLnByZXYsIGVycm9yOiBhdXRoRXJyb3IgfSkpO1xuICAgIH1cbiAgfSwgW2VucmljaFVzZXJEYXRhXSk7XG5cbiAgcmV0dXJuIHtcbiAgICAuLi5zdGF0ZSxcbiAgICBzaWduSW4sXG4gICAgc2lnblVwLFxuICAgIHNpZ25PdXQsXG4gICAgcmVzZXRQYXNzd29yZCxcbiAgICB1cGRhdGVQYXNzd29yZCxcbiAgICB1cGRhdGVQcm9maWxlLFxuICAgIHJlZnJlc2hTZXNzaW9uLFxuICB9O1xufVxuIl0sIm5hbWVzIjpbInVzZVN0YXRlIiwidXNlRWZmZWN0IiwidXNlQ2FsbGJhY2siLCJzdXBhYmFzZSIsInVzZXJSb2xlcyIsInVzZUF1dGgiLCJzdGF0ZSIsInNldFN0YXRlIiwidXNlciIsInNlc3Npb24iLCJsb2FkaW5nIiwiZXJyb3IiLCJnZXRJbml0aWFsU2Vzc2lvbiIsImNvbnNvbGUiLCJsb2ciLCJkYXRhIiwiYXV0aCIsImdldFNlc3Npb24iLCJoYXNTZXNzaW9uIiwidXNlcklkIiwiaWQiLCJ1c2VyRW1haWwiLCJlbWFpbCIsIm1lc3NhZ2UiLCJzZXNzaW9uRXhwaXJlc0F0IiwiZXhwaXJlc19hdCIsInNlc3Npb25BY2Nlc3NUb2tlbiIsImFjY2Vzc190b2tlbiIsInByZXYiLCJlbnJpY2hVc2VyRGF0YSIsInJvbGUiLCJzaG9wX2lkIiwic3Vic2NyaXB0aW9uIiwib25BdXRoU3RhdGVDaGFuZ2UiLCJldmVudCIsInVuc3Vic2NyaWJlIiwicHJvZmlsZSIsImZyb20iLCJzZWxlY3QiLCJlcSIsInNpbmdsZSIsIndhcm4iLCJ1bmRlZmluZWQiLCJwZXJtaXNzaW9ucyIsInNpZ25JbiIsInBhc3N3b3JkIiwic2lnbkluV2l0aFBhc3N3b3JkIiwiZW5yaWNoZWRVc2VyIiwiYXV0aEVycm9yIiwic2lnblVwIiwidXNlckRhdGEiLCJzaG9wX2RhdGEiLCJ0ZW1wU2hvcEVycm9yIiwiaW5zZXJ0IiwiY3JlYXRlZF9hdCIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsInJlc3VsdCIsIm9wdGlvbnMiLCJuYW1lIiwiQVRURU5EQU5UIiwiZW1haWxSZWRpcmVjdFRvIiwid2luZG93IiwibG9jYXRpb24iLCJvcmlnaW4iLCJzaWduVXBFcnJvciIsInNpZ25PdXQiLCJyZXNldFBhc3N3b3JkIiwicmVzZXRQYXNzd29yZEZvckVtYWlsIiwicmVkaXJlY3RUbyIsInVwZGF0ZVBhc3N3b3JkIiwidXBkYXRlVXNlciIsInVwZGF0ZVByb2ZpbGUiLCJ1cGRhdGVzIiwicHJvZmlsZUVycm9yIiwidXBkYXRlIiwicmVmcmVzaFNlc3Npb24iXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(app-pages-browser)/./src/hooks/useAuth.ts\n"));

/***/ })

});