PetBook SaaS Â· Product Requirements Document (PRD)

Overview
PetBook digitaliza o Livro de Banho & Tosa exigido pela VigilÃ¢ncia SanitÃ¡ria, eliminando fichas em papel e garantindo conformidade legal em poucos cliques.â€¯O produto Ã© voltado para pet shops de pequeno e mÃ©dio porte que precisam registrar serviÃ§os, evitar noâ€‘show e apresentar documentos a fiscais a qualquer momento.Â Com um Ãºnico tablet quiosque e uma aplicaÃ§Ã£o web, groomers, atendentes e o dono da loja trabalham em fluxo contÃ­nuo e rastreÃ¡vel.

Core Features

#

Feature | O que faz | Por que importa | Como funciona (alto nÃ­vel)
1 | Agenda & Fila Geral | Lista todos os banhos/tosas agendados do dia | Organiza trabalho e evita serviÃ§o perdido | Atendente agenda; no tablet, groomer clica Assumir â†’ registro passa queued âœ in\_progress
2 | Registro (Livro) Wizard | Captura dados legais + fotos + assinatura digital | Cumpre regulamentaÃ§Ã£o e protege contra multas | 4 passos: Foto antes â†’ Dados animal â†’ Produtos â†’ Foto depois + PIN-assinatura
3 | Assinatura Digital + PIN | Identifica groomer sem assinatura manual constante | Agilidade e validade jurÃ­dica | Groomer faz upload da assinatura no primeiro acesso; PIN confirma cada serviÃ§o; hash SHA-256 garante integridade
4 | ExportaÃ§Ã£o PDF/CSV | Gera livro completo para fiscais | ExigÃªncia de auditoria | Atendente/Owner exporta; evento auditado exported\_by, exported\_at
5 | WhatsApp Lembretes | Lembra tutores 24â€¯h antes | Reduz faltas | Supabase Cron â†’ Twilio template Utility
6 | Dashboard | KPIs em tempo real | VisÃ£o gerencial (ticket mÃ©dio, pendÃªncias) | SSR query agregada + Recharts

User Experience
Personas
â€¢ Owner â€“ ProprietÃ¡rio; gerencia planos, usuÃ¡rios e relatÃ³rios
â€¢ Atendente â€“ Cadastra clientes, agenda serviÃ§os, exporta livro digital
â€¢ Groomer â€“ Executa serviÃ§os, registra fotos e conclui com PIN (assinatura digitalizada)
â€¢ Fiscal â€“ Papel externo ao sistema; acessa PDFs/CSVs gerados pelo sistema via atendimento manual

Flowsâ€‘chave
â€¢ Agendamento (Atendente) â†’ Agenda dia/hora, serviÃ§o, pet.
â€¢ Fila Geral (Tablet) â†’ Groomer seleciona card âœ digita PIN âœ Foto antes âœ Dados âœ Produtos âœ Foto depois & Assinatura (via PIN) âœ Concluir.
â€¢ ExportaÃ§Ã£o â†’ BotÃ£o Gerar PDF âœ digita PIN âœ download + log.

UI/UX ConsideraÃ§Ãµes
â€¢ Tablet 10â€³, touch targets â‰¥â€¯48â€¯dp.
â€¢ Cor Azul/ Laranja/ Verde para estados (queued/in\_progress/completed).
â€¢ Modal PIN numÃ©rico, 3 tentativas, feedback claro.
â€¢ Os **componentes compartilhados da aplicaÃ§Ã£o devem ser desenvolvidos primeiro** (ex: botÃµes, inputs, cabeÃ§alho, layout de pÃ¡gina, modais padrÃ£o, toasts, etc.) antes das pÃ¡ginas completas.
â€¢ As **rotas da aplicaÃ§Ã£o devem ser divididas em autenticadas e nÃ£o autenticadas**:

* UsuÃ¡rio autenticado â†’ redirecionado para `/dashboard`
* UsuÃ¡rio deslogado â†’ redirecionado para `/login`
  â€¢ A pasta `layout/` conterÃ¡ arquivos nomeados de acordo com as telas (por tipo de usuÃ¡rio ou contexto) e deve ser usada como **referÃªncia visual e estrutural na construÃ§Ã£o das interfaces**.

Technical Architecture
Frontend: Next.jsÂ 14 (App Router) + shadcn/ui + Tailwind + PWA (nextâ€‘pwa) para modo quiosque.
Backendâ€‘asâ€‘aâ€‘Service: Supabase (PostgreSQL, Auth, Storage, Edge Functions, Cron).

Data Models
shops, users (roles, signature\_hash, pin\_hash, signature\_image\_url), pets, clients, appointments, groomings, audit\_logs.

APIs & Integrations
â€¢ Twilio WhatsApp Business (template Utility)
â€¢ Resend (backup eâ€‘mail)
â€¢ Stripe (assinatura SaaS)

Infrastructure
â€¢ Vercel (SSR/Edge)
â€¢ Supabase managed Postgres
â€¢ Cloudinary (opcional) para compressÃ£o de imagens.
â€¢ Security: Rowâ€‘Level Security por shop\_id, Argon2id para PINs, JWT cookies (httpOnly).

Authentication & User Management
A configuraÃ§Ã£o completa de **login, cadastro e recuperaÃ§Ã£o de senha** serÃ¡ desenvolvida com Supabase Auth. O fluxo inclui:
â€¢ Cadastro com e-mail e senha via convite
â€¢ DefiniÃ§Ã£o de perfis (owner, atendente, groomer) no banco de dados
â€¢ ConfirmaÃ§Ã£o de conta via link de verificaÃ§Ã£o enviado por e-mail
â€¢ RecuperaÃ§Ã£o de senha com link seguro via e-mail
â€¢ VerificaÃ§Ã£o de sessÃ£o via cookies httpOnly JWT
ğŸ“š DocumentaÃ§Ã£o oficial de referÃªncia: [Supabase Auth docs](https://supabase.com/docs/guides/auth)

Development Roadmap
PhaseÂ 0 â€“ Foundation
â€¢ RepositÃ³rio monorepo, Design Tokens â†’ Tailwind
â€¢ DB schema + RLS, Supabase project
â€¢ Auth (invite, password, roles, confirmaÃ§Ã£o de e-mail)
â€¢ Desenvolvimento dos componentes principais compartilhados e configuraÃ§Ã£o de rotas autenticadas vs pÃºblicas

PhaseÂ 1 â€“ MVP
â€¢ Agenda & Fila Geral (UI + claim endpoint)
â€¢ Wizard Registro completo (4 passos, upload da assinatura, PIN + hash SHA-256)
â€¢ ExportaÃ§Ã£o PDF/CSV
â€¢ WhatsApp reminders (Edge Function + Cron)
â€¢ Dash KPI (SSR)

PhaseÂ 2 â€“ PÃ³sâ€‘MVP
â€¢ Plano Pro: Groomers ilimitados, WhatsApp Marketing
â€¢ Programa de fidelidade (banho grÃ¡tis N vezes)
â€¢ Multiâ€‘filial dashboard consolidado

Logical Dependency Chain
â€¢ DB + Auth â†’ base para qualquer feature.
â€¢ Design System / UI Shell â†’ todos os componentes shared.
â€¢ Agenda + Claim logic â†’ necessÃ¡rio antes do Wizard.
â€¢ Wizard Registro â†’ depende de claim e assinatura digital.
â€¢ ExportaÃ§Ã£o â†’ depende do registro concluÃ­do.
â€¢ Dashboards & Reminders â†’ podem viver depois que registro existe.

Risks and Mitigations
Risco | MitigaÃ§Ã£o
Conflito de claim simultÃ¢neo | TransaÃ§Ã£o UPDATE â€¦ WHERE status='queued' + check rows affected
Fotos grandes lentas | Compress clientâ€‘side, limit 5â€¯MB
Groomer esquece PIN | Owner pode resetar; restriÃ§Ã£o login atÃ© redefinir
Fiscal pede offline acesso | PDF export local; offline cache retirado do MVP (assumido conexÃ£o mÃ­nima)
Overâ€‘scope | PRD trancado; novos pedidos vÃ£o para PhaseÂ 2 backlog

UI Inventory por Tipo de UsuÃ¡rio

ğŸ§‘â€ğŸ’¼ Owner

1. Landing Page
   ConteÃºdo: Call-to-action "Teste grÃ¡tis", botÃ£o "Entrar", Ã¢ncoras para seÃ§Ãµes (funcionalidades, preÃ§os, etc.)
   AÃ§Ãµes:
   â€¢ "Teste grÃ¡tis" â†’ Rota de criaÃ§Ã£o de conta (/signup)
   â€¢ "Entrar" â†’ Tela de Login

2. Login
   ConteÃºdo: Campo e-mail, senha, checkbox Termos, botÃ£o Entrar
   AÃ§Ãµes:
   â€¢ Entrar â†’ Redireciona para Onboarding (se for primeiro acesso) ou Dashboard

3. Onboarding
   ConteÃºdo: Wizard passo Ãºnico:
   â€¢ Nome da loja
   â€¢ WhatsApp comercial
   â€¢ BotÃ£o para importar CSV (opcional)
   AÃ§Ãµes:
   â€¢ Finalizar â†’ Vai para Dashboard

4. Dashboard
   ConteÃºdo: Cards de KPI: check-ins hoje, pendentes, concluÃ­dos, ticket mÃ©dio
   AÃ§Ãµes:
   â€¢ Clique em qualquer card â†’ Filtra registros no Livro Digital

5. Agenda (GestÃ£o)
   ConteÃºdo: CalendÃ¡rio semanal (semana atual), pets agendados
   AÃ§Ãµes:
   â€¢ Drag and drop â†’ Reagenda horÃ¡rio
   â€¢ Clique em agendamento â†’ Abre Drawer de Detalhe com aÃ§Ãµes: editar, cancelar

6. Clientes & Pets
   ConteÃºdo: Lista de clientes e seus pets
   AÃ§Ãµes:
   â€¢ Cadastrar cliente â†’ Abre Drawer com formulÃ¡rio
   â€¢ Editar cliente ou pet â†’ Abre Drawer
   â€¢ Excluir â†’ Modal de confirmaÃ§Ã£o destrutiva

7. Livro Digital
   ConteÃºdo: Lista de atendimentos registrados
   AÃ§Ãµes:
   â€¢ Filtro por data â†’ Atualiza listagem
   â€¢ BotÃ£o "Exportar" â†’ Abre Modal de ExportaÃ§Ã£o (escolha CSV ou PDF, digita PIN)

8. RelatÃ³rios
   ConteÃºdo: Tabela detalhada com filtros avanÃ§ados
   AÃ§Ãµes:
   â€¢ Filtro â†’ Atualiza tabela
   â€¢ Exportar â†’ Modal de aviso de arquivo grande + Exportar CSV/PDF

9. ConfiguraÃ§Ãµes
   Aba Loja: Nome, WhatsApp, horÃ¡rio de funcionamento
   Aba IntegraÃ§Ãµes: Chaves Twilio, Resend, Stripe
   Aba UsuÃ¡rios: Lista de usuÃ¡rios / Convidar â†’ Modal 2 passos (dados + assinatura/PIN ou pendente)
   Aba Assinatura: Plano atual, status, botÃ£o "Gerenciar"

10. Meu Perfil
    ConteÃºdo: Nome, e-mail, foto, PIN
    AÃ§Ãµes:
    â€¢ Editar dados â†’ Salva
    â€¢ Redefinir PIN â†’ Abre Tela de PIN

11. Tela Assinatura & PIN
    ConteÃºdo: Canvas assinatura, campo PIN
    AÃ§Ãµes: Salva e volta ao perfil

ğŸ‘©â€ğŸ’» Atendente
(Mesmas telas do Owner com algumas restriÃ§Ãµes)
Tem acesso a: Login, Dashboard, Agenda, Clientes & Pets, Livro Digital, RelatÃ³rios, Meu Perfil, PIN.
NÃ£o vÃª: Aba IntegraÃ§Ãµes ou Assinatura nas ConfiguraÃ§Ãµes
Exportar Livro: Exige PIN pessoal (modal)

ğŸ§‘â€ğŸ”§ Groomer

1. Login (Primeiro Acesso)
   ConteÃºdo: CriaÃ§Ã£o de senha + assinatura + PIN
   AÃ§Ãµes: ApÃ³s salvar â†’ Redireciona para App Kiosk (Tablet)

2. App Kiosk â€“ Selecionar Groomer
   ConteÃºdo: Grade com avatares dos groomers
   AÃ§Ãµes:
   â€¢ Seleciona avatar â†’ Abre Modal PIN

3. Modal PIN (Claim)
   ConteÃºdo: Digita PIN
   AÃ§Ãµes:
   â€¢ PIN correto â†’ Abre Fila Geral

4. Fila Geral
   ConteÃºdo: Lista de pets em queued
   AÃ§Ãµes:
   â€¢ Clicar "Assumir" â†’ Atualiza status para in\_progress e inicia Wizard Grooming

5. Wizard Grooming
   Passo 1: Foto Antes
   Passo 2: Dados do Animal
   Passo 3: Produtos utilizados
   Passo 4: Foto Depois + PIN
   AÃ§Ãµes: "Concluir Atendimento" â†’ Salva registro completo no Livro Digital

6. Meus Atendimentos
   ConteÃºdo: Lista de serviÃ§os in\_progress ou concluÃ­dos
   AÃ§Ãµes:
   â€¢ "Continuar" â†’ Reabre o Wizard Grooming
   â€¢ "Cancelar" â†’ Abre Modal de confirmaÃ§Ã£o destrutiva

7. Meu Perfil
   ConteÃºdo: Nome, avatar, redefinir PIN
   AÃ§Ãµes: Salva dados

ğŸ“Œ Modais Globais
â€¢ Modal PIN: DigitaÃ§Ã£o do PIN, 3 tentativas, bloqueio temporÃ¡rio se erro
â€¢ Modal ExportaÃ§Ã£o: Escolha entre PDF/CSV, PIN obrigatÃ³rio
â€¢ Modal ConfirmaÃ§Ã£o destrutiva: Exige digitar palavra-chave para deletar
â€¢ Erro 410: Convite expirado â†’ BotÃ£o "Reenviar convite"

Appendix
â€¢ Pesquisa CRMV & VigilÃ¢ncia SanitÃ¡ria â€“ requisitos mÃ­nimos de registro.
â€¢ Figma links: Design System, Landing Page, Kiosk flow.
â€¢ SQL migrations v1 (incluÃ­das em /db/migrations).
